<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <title>Study</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
</head>
<body>
    <nav>
        <div class="brand">
            <a href="index.html" style="text-decoration: none; font-weight: bold;  color: white; font-size: 24px; font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">StudyFlash</a>
        </div>
        <ul>
            <a href="dashboard.html" class="links">Dashboard</a>
            <a href="study.html" class="links">Study</a>
            <a href="" class="links">Resources</a>
            <a href="settings.html" id="settings" style="display: none;" class="links">Settings</a>
        </ul>
        <div class="btns">
            <h1 class="wlcm">Welcome, AndrejStanic3!</h1>
            <button class="signlog">Sign up / Log in</button>
            <button class="signlog" style="display: none;" id="logout">Log Out</button>
        </div>
    </nav>
    
    <div style="margin-top: 100px; margin-left: 182px; padding-top: 25px; display: flex; gap: 20px;">
        <div class="containerBtn">Chat</div>
        <div class="containerBtn">Upload</div>
        <div class="containerBtn">Flashcards</div>
        <div class="containerBtn">Quiz</div>
    </div>

    <div class="chatContainer" id="chat">
        <div class="chatBox">
            <div class="intro">
                <p id="chatP" style="text-align: center;">This is Flashy<br><br>
                    <img src="imgs/bot.png" alt="" style="height: 90px; width: auto; opacity: 0.5; padding-left: 12px; padding-bottom: 10px;"><br>
                    Ask him anything you want, he'll respond right away!</p>
            </div>
        </div>
        <div class="chatwithBot">
        <form autocomplete="off" onsubmit="return false;" style="width: 91%;">
            <input
                type="text"
                class="chatInput"
                autocomplete="off"
                placeholder="Ask a question about your studies..."
                spellcheck="false"
            />
        </form>
            <button id="send" class="send1">
                <img src="imgs/send.png" class="send" style="display: none;">
                <img src="imgs/send2.png" class="send" style="display: block;">
            </button>
        </div>
    </div>

    <div id="upload">
        <div class="chatContainer" id="upload" style="min-height: 260px;">
            <div class="chatBox2" id="uploadBox" style="min-height: 260px;">
                <div style="display: grid; height: 100px; justify-content: center; margin-top: 45px;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="45" height="45" style="justify-self: center;">
                        <path d="M256 64 L160 160 Q150 170 160 180 Q170 190 180 180 L240 120 L240 360 Q240 380 256 380 Q272 380 272 360 L272 120 L332 180 Q342 190 352 180 Q362 170 352 160 Z" 
                                fill="#9ca3af" 
                                stroke="#9ca3af" 
                                stroke-width="20" 
                                stroke-linecap="round" 
                                stroke-linejoin="round"/>
                        <path d="M30 350 Q32 368 32 384 L32 448 Q32 464 48 464 L464 464 Q480 464 480 448 L480 384 Q480 368 480 350" 
                                fill="none" 
                                stroke="#9ca3af" 
                                stroke-width="32" 
                                stroke-linecap="round" 
                                stroke-linejoin="round"/>
                    </svg>
                    <p id="uploadMainText" style="margin: 0; text-align: center; margin-top: 20px; font-size: 18px;">Click to upload documents</p>
                    <p style="margin: 0; text-align: center; margin-top: 12px;">PDF, TXT, DOC, DOCX</p>
                </div>
            </div>
        </div>

        <input type="file" id="fileInput" accept=".pdf,.txt,.doc,.docx" multiple>

        <div class="uploadedFilesContainer" id="uploadedFilesContainer" style="display: none;">
            <div class="chatContainer" style="min-height: 60px; align-items: center;">
                <h3 style="margin: 0; font-weight: 500; font-size: 16px; padding-left: 10px; margin-bottom: 16px;">Uploaded files:</h3>
                <div id="filesList"></div>
            </div>
        </div>
    </div>
    
    <div id="flashcards" style="display: none;">
        <div class="flashcardsSection">
            <div class="sideContainer" style="display: flex; flex-direction: column;">
                <div style="flex: 1;">
                    <h3 style="margin: 0; margin-bottom: 20px;" id="listF">Files List</h3>
                    <p style="color: #6b7280;">No files uploaded yet</p>
                </div>
                <div class="buttons2" style="margin-top: auto;">
                    <button class="button flashcardsBtn" style="align-items: center; background-color: #4f46e5; color: white;">
                        <img src="imgs/brain.png" height="30" width="30">Generate Flashcards
                    </button>
                </div>
            </div>
            <div class="chatContainer" style="flex: 1; margin-left: 0;">
                <div class="chatBox">
                    <p style="text-align: center; padding: 20px;">Select files to generate flashcards</p>
                </div>
            </div>
        </div>
    </div>
    <div id="quiz">
        <div class="chatContainer">
            <div class="sideContainer" style="display: flex; flex-direction: column;">
                <div style="flex: 1;">
                    <h3 style="margin: 0; margin-bottom: 20px;" id="listF">Files List</h3>
                    <p style="color: #6b7280;">No files uploaded yet</p>
                </div>
                <div class="buttons2" style="margin-top: auto;">
                    <button class="button flashcardsBtn" style="align-items: center; background-color: #4f46e5; color: white;">
                        <img src="imgs/brain.png" height="30" width="30">Generate Quiz
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="authModal" style="display: none;">
        <div class="modalForm">
            <button onclick="closeModal()" class="close">Ã—</button>
            <h2 style="color: #000;">Sign Up / Log in</h2>
            <input type="email" id="emailInput" placeholder="Email" class="email">
            <input type="password" id="passwordInput" placeholder="Password" class="password">
            <button onclick="handleSignUp()" class="SignUp">Sign Up</button>
            <button onclick="handleLogIn()" class="LogIn">Log In</button>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
    <script src="init.js"></script>
    <script src="app.js"></script>
    <script src="index.js"></script>
</body>
</html>